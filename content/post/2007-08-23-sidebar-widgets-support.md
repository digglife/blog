---
title: 如何让WordPress模板支持Sidebar Widgets(侧边栏插件)
author: 摩摩诘
type: post
date: 2007-08-23T13:51:45+00:00
url: /articles/sidebar-widgets-support.html
ratings_users:
  - 0
  - 0
ratings_score:
  - 0
  - 0
ratings_average:
  - 0
  - 0
0:
  - 7f2014f73a33083841111089dec932d101159e3ca16f151f6178dd13aee89d3350e86d19c16cc12a7d51faa5e6011a13
  - 7f2014f73a33083841111089dec932d101159e3ca16f151f6178dd13aee89d3350e86d19c16cc12a7d51faa5e6011a13
1:
  - 6acd6c9d52372a34b7afe49940a7402aac10b22bd8c7a1c055ce0e084cd5310fc9783c52fe522bc24fd539057b31899f
  - 6acd6c9d52372a34b7afe49940a7402aac10b22bd8c7a1c055ce0e084cd5310fc9783c52fe522bc24fd539057b31899f
2:
  - 7b27c21db03482b5ea1b4cb7c95b94e797519a6e8b21068661370c6458902cb4f219c0938bef21699f1b8c9ddc971e30
  - 7b27c21db03482b5ea1b4cb7c95b94e797519a6e8b21068661370c6458902cb4f219c0938bef21699f1b8c9ddc971e30
3:
  - 3506bcdb510c51c0ba60c4e9e0b62c9b306cc93c8d02441225320efc0e440494ba3ef8c40e26197e81a856e3638b1688
  - 3506bcdb510c51c0ba60c4e9e0b62c9b306cc93c8d02441225320efc0e440494ba3ef8c40e26197e81a856e3638b1688
4:
  - 0ffa71cb1845eff263b02a885de96ff5c6a92ae4b4bba12724c1ada5aaad3c4f03b89848b860152644c472d9156919cd
  - 0ffa71cb1845eff263b02a885de96ff5c6a92ae4b4bba12724c1ada5aaad3c4f03b89848b860152644c472d9156919cd
5:
  - 18ace556ce7bda59c0f1283c574fcd3a77817f0f4b323f1500d8f9f6e598126c3b6e43ced248d685cc2fcd064ca9a1f5
  - 18ace556ce7bda59c0f1283c574fcd3a77817f0f4b323f1500d8f9f6e598126c3b6e43ced248d685cc2fcd064ca9a1f5
6:
  - 7ce08d0e922def28313b40379207ff487fa4a2aeb23e9d8e0b3a044f309003708b89cf5fd23210af3da2dab2f11a4eef
  - 7ce08d0e922def28313b40379207ff487fa4a2aeb23e9d8e0b3a044f309003708b89cf5fd23210af3da2dab2f11a4eef
7:
  - 9616d7c5364982e3a62d102ccb165238bfd5be57a8a46aa76918fa811b78ecff6ae8dacb243ecca27e95a1cc8192b761
  - 9616d7c5364982e3a62d102ccb165238bfd5be57a8a46aa76918fa811b78ecff6ae8dacb243ecca27e95a1cc8192b761
8:
  - c3fd43ec13e84747f7cb8b3d44be2a1742b490453cce59eabccd413976c5e0382e4e9fc45b63a8d6420fb9f7c81a703b
  - c3fd43ec13e84747f7cb8b3d44be2a1742b490453cce59eabccd413976c5e0382e4e9fc45b63a8d6420fb9f7c81a703b
9:
  - c710ed32757d3c75fe12cfb71df86ab9098e90cb3461d1a9fe49bf1aafa2ccabd820655b86e5cb482cea68bf3734ada1
  - c710ed32757d3c75fe12cfb71df86ab9098e90cb3461d1a9fe49bf1aafa2ccabd820655b86e5cb482cea68bf3734ada1
comment_count:
  - 10
trackback_count:
  - 1
related_posts:
  - 'a:2:{s:4:"time";i:1224888765;s:13:"related_posts";s:1668:"<h3>相关日志</h3><ul class="related_post"><li><a href="http://www.digglife.cn/articles/different-sidebar-in-different-pages.html" title="如何让Wordpress模板在不同页面显示不同侧边栏">如何让Wordpress模板在不同页面显示不同侧边栏</a></li><li><a href="http://www.digglife.cn/articles/3-column-wordpress-themes.html" title="20款美观的三栏Wordpress主题模板">20款美观的三栏Wordpress主题模板</a></li><li><a href="http://www.digglife.cn/articles/24-fresh-usable-and-elegant-wordpress-themes.html" title="24款新鲜,易用,优雅的Wordpress主题模板">24款新鲜,易用,优雅的Wordpress主题模板</a></li><li><a href="http://www.digglife.cn/articles/20%e6%ac%be%e7%bb%9d%e5%af%b9%e4%b8%8d%e4%bc%9a%e8%ae%a9%e4%bd%a0%e5%a4%b1%e6%9c%9b%e7%9a%84wordpress%e6%a8%a1%e7%89%88.html" title="20款绝对不会让你失望的Wordpress模版.">20款绝对不会让你失望的Wordpress模版.</a></li><li><a href="http://www.digglife.cn/articles/8%e6%ac%be%e4%bc%98%e9%9b%85%e7%ae%80%e6%b4%81%e7%9a%84wordpress%e6%a8%a1%e7%89%88.html" title="8款优雅简洁的Wordpress模版">8款优雅简洁的Wordpress模版</a></li><li><a href="http://www.digglife.cn/articles/%e7%be%8e%e5%91%b3%e6%a0%87%e7%ad%be%e4%b8%ad%e6%9c%80%e5%8f%97%e6%ac%a2%e8%bf%8e%e7%9a%8410%e5%a4%a7wordpress%e4%b8%bb%e9%a2%98%e6%a8%a1%e6%9d%bf.html" title="美味标签中最受欢迎的10大Wordpress主题模板">美味标签中最受欢迎的10大Wordpress主题模板</a></li><li><a href="http://www.digglife.cn/articles/google-docs-templates.html" title="使用开放的模板创建Google文件">使用开放的模板创建Google文件</a></li></ul>";}'
views:
  - 6251
bot_views:
  - 2612
duoshuo_thread_id:
  - 1154125469839261900
categories:
  - 博客研究
tags:
  - widgets
  - wordpress
  - 侧边栏
  - 修改
  - 插件
  - 模板

---
[<img src="https://www.digglife.net/wp-content/uploads/3/379/2007/08/wordpress-logo-cristal-thumb.jpg" alt="wordpress-logo-cristal" width="70" height="70" align="right" />][1] 昨天研究了一下Wordpress的模板修改,主要是为了给一个不支持自定义侧边栏的三栏模板加入这个简单方便的功能.其实我是一个PHP文盲,对Wordpress模板的修改也并没有深刻的了解,下面是作为一个门外汉研究心得,只讨论实现方法,并不深究原因,没有多大的技术含量,希望高手不要见笑. <!--more-->

### **一.有关侧边栏的两个重要文件**

侧边栏所涉及到的主要集中在这两个文件上,我的理解是,sidebar.php负责侧边栏的显示内容,fuctions.php在这里则负责侧边栏如何显示.一个不支持侧边栏插件的模板没有functions.php这个文件,sidebar.php中也没有调用语句.

### **二.Functions.php文件修改.**

为了让模板支持侧边栏插件,首先需要新建一个functions.php文件,然后添加一些代码.我参考了一些文章和许多模板代码之后,发现三栏和两栏的fuctions.php代码在细节上有些区别,为了更加清除地说明,下面分两种情况讨论(我靠,怎么像做数学啊): **1.两栏模板(侧栏只有一列)** 
  
[sourcecode language=&#8217;php&#8217;]

< ?php if ( function\_exists('register\_sidebar') ) register\_sidebar(array( 'before\_widget' => &#8216;

  * &#8216;, // #1
  
    &#8216;after_widget&#8217; => &#8216;
&#8216;, // #2
  
&#8216;before_title&#8217; => &#8216;

### &#8216;, // #3
  
&#8216;after_title&#8217; => &#8216;

&#8216;, // #4
  
));?>
  
[/sourcecode]

其中**#1和#2是定义Widget内容前后标识符的语句,#3和#4是定义Widget标题的标识符的语句**.根据模板的具体情况而定,你可以参考sidebar.php中已经定义过的侧边栏来决定应该采用哪种标识符.比如我修改的那个模板的sidebar.php中:
  
[sourcecode language=&#8217;php&#8217;]

<div id="sidebar_r">
  //右栏模块</p> 
  
  <ul>
    <li>
      //Widgets前标识<br /> <h3>
        < ?php _e('Archives'); ?>
      </h3>
      
      <p>
        //Widgets标题
      </p>
      
      <ul>
        < ?php wp_get_archives('type=monthly'); ?>
      </ul>
    </li>
    
    <p>
      // widgets后标识 &#8230;&#8230; </ul> </div> 
      
      <p>
        [/sourcecode]<br /> 所以我应该在#1和#2语句中的&#8217; &#8216;内填入分别填入<li>和</li>,#3和#4语句中的&#8217; &#8216;内填入<h2>和</h2>.
      </p>
      
      <p>
        <strong>2.三栏模板(侧栏有两列)</strong> 通常情况下,三栏模板的functions.php可以按照如下代码定义:<br /> [sourcecode language=&#8217;php&#8217;]<br /> < ?php if ( function_exists('register_sidebar') ) register_sidebar(array( 'name' => &#8216;Left Sidebar&#8217;, //#5<br /> &#8216;before_widget&#8217; => &#8216;
      </p>
      
      <li>
        &#8216;,<br /> &#8216;after_widget&#8217; => &#8216;
      </li>
      <p>
        &#8216;,<br /> &#8216;before_title&#8217; => &#8216;
      </p>
      
      <h3>
        &#8216;,<br /> &#8216;after_title&#8217; => &#8216;
      </h3>
      
      <p>
        &#8216;,<br /> ));
      </p>
      
      <p>
        if ( function_exists(&#8216;register_sidebar&#8217;) ) register_sidebar(array(<br /> &#8216;name&#8217; => &#8216;Right Sidebar&#8217;, //#6<br /> &#8216;before_widget&#8217; => &#8216;
      </p>
      
      <li>
        &#8216;,<br /> &#8216;after_widget&#8217; => &#8216;
      </li>
      <p>
        &#8216;,<br /> &#8216;before_title&#8217; => &#8216;
      </p>
      
      <h3>
        &#8216;,<br /> &#8216;after_title&#8217; => &#8216;
      </h3>
      
      <p>
        &#8216;,<br /> )); ?><br /> [/sourcecode]
      </p>
      
      <p>
        不要看代码很长,其实还是很简单.因为侧栏有两列,所以代码自然比单列的两栏模板多出一段,而且几乎一样.区别<strong>只在#5和#6两处的name</strong>,所谓<strong>name就是给widget指定各自的名称</strong>,以便在sidebar.php中分别调用.所以你只需要给这两个widget取两个自己认得的名字就好了.
      </p>
      
      <h3>
        <strong>三.Sidebar.php文件的修改.</strong>
      </h3>
      
      <p>
        functions.php改好之后,sidebar.php就非常之简单了.我们只需在合适的地方加上下面这段代码:<br /> [sourcecode language=&#8217;php&#8217;]
      </p>
      
      <p>
        < ?php if ( function_exists('dynamic_sidebar') && dynamic_sidebar('#7') ) : else : ?>
      </p>
      
      <p>
        < ?php endif; ?>
      </p>
      
      <p>
        [/sourcecode]
      </p>
      
      <p>
        其中<strong>#7</strong>为widgets的名称,对应name属性的值(#5和#6).
      </p>
      
      <p>
        <strong>以我的右栏为例:</strong><br /> [sourcecode language=&#8217;php&#8217;]
      </p>
      
      <div id="sidebar_r">
        //右栏模块</p> 
        
        <ul>
          #8</p> 
          
          <li>
            //Widgets前标识<br /> <h3>
              < ?php _e('Archives'); ?>
            </h3>
            
            <p>
              //Widgets标题
            </p>
            
            <ul>
              < ?php wp_get_archives('type=monthly'); ?>
            </ul>
          </li>
          
          <p>
            // widgets后标识<br /> &#8230;&#8230;(更多模板默认的widgets)#9 </ul> </div> 
            
            <p>
              [/sourcecode]
            </p>
            
            <p>
              如果你想保留默认的sidebar定义,在<strong>#8</strong>处加上上述代码的第一行,在<strong>#9</strong>处添加第二行即可.如果你不再需要默认的sidebar定义,可以将他们全部删除,直接加上上面的代码(推荐). 两栏模板只需添加一次,三栏模板需要给左右两列各添加一次,当然要对应functions.php中各自的name.
            </p>
            
            <h3>
              <strong>四.总结</strong>
            </h3>
            
            <p>
              1.模板不同,代码会有差别,请根据模板的情况决定代码.
            </p>
            
            <p>
              2.上面这些我试验过多次,证明是可行的而且也是简单的,如果有什么错误的地方,请在留言中指出,谢谢.
            </p>
            
            <p>
              3.参考:<a href="http://www.crystown.cn/" target="_blank">Crystown</a>的<a href="http://www.crystown.cn/index.php/p/36/" target="_blank">WordPress Widget研究(一)</a>
            </p>

 [1]: https://www.digglife.net/wp-content/uploads/3/379/2007/08/wordpress-logo-cristal.jpg
